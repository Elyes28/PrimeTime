{"version":3,"file":"static/webpack/static\\development\\pages\\order\\[id].js.49b304d6338da404b4df.hot-update.js","sources":["webpack:///./pages/order/.js"],"sourcesContent":["import { Grid, ImageList, List, ListItem, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography } from '@material-ui/core';\r\nimport Axios from 'axios';\r\nimport { useRouter } from 'next/router';\r\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\r\nimport { Card, CardBody, CardText, CardTitle, Col, ListGroup, Row, Table } from 'reactstrap';\r\nimport CheckoutSteps from '../../components/CheckoutSteps';\r\nimport MessageBox from '../../components/MessageBox';\r\nimport CommonLayout from '../../containers/common/common-layout';\r\nimport { PayPalButtons, usePayPalScriptReducer } from '@paypal/react-paypal-js'\r\nimport StripeContainer from '../../components/StripeContainer';\r\n\r\nimport { Store } from '../../utils/Store';\r\nimport NextLink from 'next/link';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nexport default function OrderScreen() {\r\n  const { state } = useContext(Store);\r\n  const {cart: {cartItems}, userInfo } = state;\r\n\r\n  const router = useRouter();\r\n    const { id: orderId } = router.query\r\n\r\n    \r\n   /* const {\r\n      cart: { shippingAddress },\r\n      \r\n    } = state;*/\r\n    const [showItem, setShowItem] = useState(false);\r\n    const [ order,setOrder] = useState({});\r\n    const [taxPrice,SettaxPrice]=useState();\r\n    const [paymentMethod,SetpaymentMethod]=useState();\r\n    const [shippingAddress,SetshippingAddress]= useState({});\r\n    const [orderItems,SetorderItems]=useState([]);\r\n    const [totalPrice,SettotalPrice]=useState();\r\n    const [itemsPrice,SetitemsPrice]=useState();\r\n    const [shippingPrice,SetshippingPrice]=useState();\r\n    const [isPaid,SetisPaid]=useState();\r\n    const [isDelivered,SetisDelivered]=useState();\r\n    const [deliveredAt,SetdeliveredAt]=useState();\r\n    const [paidAt,SetpaidAt]=useState();\r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    \r\n    const fetchOrder =  () => {\r\n      try {\r\n       \r\n          Axios.get(`http://localhost:5000/orders/${orderId}`, {\r\n          headers: { authorization: `Bearer ${userInfo.token}` },\r\n        }).then( res => {\r\n        \r\n          SettaxPrice(res.data.taxPrice);\r\n          SetpaymentMethod(res.data.paymentMethod);\r\n          SetshippingAddress(res.data.shippingAddress);\r\n          SetorderItems(res.data.orderItems);\r\n          console.log(res.data.orderItems);\r\n          SettotalPrice(res.data.totalPrice);\r\n          SetshippingPrice(res.data.shippingPrice)\r\n          SetitemsPrice(res.data.itemsPrice)\r\n          SetisPaid(res.data.isPaid);\r\n          SetisDelivered(res.data.isDelivered)\r\n          SetdeliveredAt(res.data.deliveredAt)\r\n          SetpaidAt(res.data.paidAt);\r\n         });\r\n        \r\n      } catch (err) {\r\n        \r\n      }\r\n    };\r\n\r\n    if (!userInfo) {\r\n      return alert(\"Go To Sign In\")\r\n    }\r\n    if (!order._id ||\r\n      successPay ||\r\n      successDeliver ||\r\n      (order._id && order._id !== orderId)) {\r\n      fetchOrder();\r\n    }\r\n  }, [userInfo, orderId]);\r\n\r\n  \r\n  return (\r\n    <CommonLayout title={`Order ${orderId}`}>\r\n      <CheckoutSteps activeStep={3}></CheckoutSteps>\r\n      <Typography component=\"h5\" variant=\"h5\">\r\n        Order {orderId}\r\n      </Typography>\r\n      <div>\r\n      <Grid container spacing={1}>\r\n          <Grid item md={9} xs={12}>\r\n           <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h3\" variant=\"h3\">\r\n                    Shipping Address\r\n                  </Typography>\r\n                </ListItem>\r\n                <ListItem>\r\n                  {shippingAddress.fullName}, {shippingAddress.address},{' '}\r\n                  {shippingAddress.city}, {shippingAddress.postalCode},{' '}\r\n                  {shippingAddress.country}\r\n                </ListItem>\r\n                <ListItem>\r\n                  Status:{' '}\r\n                  {isDelivered\r\n                    ? `delivered at ${deliveredAt}`\r\n                    : 'not delivered'}\r\n                </ListItem>\r\n              </List>\r\n            </Card>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h3\" variant=\"h3\">\r\n                    Payment Method\r\n                  </Typography>\r\n                </ListItem>\r\n                <ListItem>{paymentMethod}</ListItem>\r\n                <ListItem>\r\n                  Status: {isPaid ? `paid at ${paidAt}` : 'not paid'}\r\n                </ListItem>\r\n              </List>\r\n            </Card>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h2\" variant=\"h2\">\r\n                    Order Items\r\n                  </Typography>\r\n                </ListItem>\r\n                <Card className=\"mb-3\">\r\n            <CardBody>\r\n              <CardTitle>Items</CardTitle>\r\n              <ListGroup variant=\"flush\">\r\n                {orderItems.map((item) => (\r\n                  <ListItem key={item._id}>\r\n                    <Row className=\"align-items-center\">\r\n                      <Col md={6}>\r\n                        <img\r\n                          src={item.image}\r\n                          alt={item.name}\r\n                          className=\"img-fluid rounded img-thumbnail\"\r\n                        ></img>{' '}\r\n                         \r\n                      </Col>\r\n                      <Col md={3}>\r\n                        <span>{item.quantity}</span>\r\n                      </Col>\r\n                      <Col md={3}>${item.price}</Col>\r\n                    </Row>\r\n                  </ListItem>\r\n                ))}\r\n              </ListGroup>\r\n               \r\n            </CardBody>\r\n          </Card>\r\n              </List>\r\n            </Card>\r\n             \r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography variant=\"h3\">Order Summary</Typography>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Items Price:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${itemsPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Tax:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${taxPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Shipping:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${shippingPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>\r\n                        <strong>Total:</strong>\r\n                      </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">\r\n                        <strong>${totalPrice}</strong>\r\n                      </Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                {showItem ? (\r\n\t\t\t\t<StripeContainer x={totalPrice} />\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<h3>${totalPrice}</h3>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button onClick={() => setShowItem(true)}>Go To pay </button>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n              </List>\r\n            </Card>\r\n          </Grid>\r\n            </Grid>\r\n            </div>\r\n    \r\n  </CommonLayout>\r\n    \r\n  \r\n     \r\n  );\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAQA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAdA;AA0BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;;;;A","sourceRoot":""}
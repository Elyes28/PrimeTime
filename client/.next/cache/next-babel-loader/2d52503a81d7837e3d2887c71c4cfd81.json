{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Karim\\\\Documents\\\\GitHub\\\\PrimeTime\\\\client\\\\pages\\\\order\\\\[id].js\";\nvar __jsx = React.createElement;\nimport { Grid, ImageList, List, ListItem, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography } from '@material-ui/core';\nimport Axios from 'axios';\nimport { useRouter } from 'next/router';\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\nimport { Card, CardBody, CardText, CardTitle, Col, ListGroup, Row, Table } from 'reactstrap';\nimport CheckoutSteps from '../../components/CheckoutSteps';\nimport MessageBox from '../../components/MessageBox';\nimport CommonLayout from '../../containers/common/common-layout';\nimport { PayPalButtons, usePayPalScriptReducer } from '@paypal/react-paypal-js';\nimport StripeContainer from '../../components/StripeContainer';\nimport { Store } from '../../utils/Store';\nimport NextLink from 'next/link';\nimport { Link } from 'react-router-dom';\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\nvar CARD_OPTIONS = {\n  iconStyle: \"solid\",\n  style: {\n    base: {\n      iconColor: \"#c4f0ff\",\n      color: \"#000\",\n      fontWeight: 500,\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n      fontSize: \"16px\",\n      fontSmoothing: \"antialiased\",\n      \":-webkit-autofill\": {\n        color: \"#fce883\"\n      },\n      \"::placeholder\": {\n        color: \"#87bbfd\"\n      }\n    },\n    invalid: {\n      iconColor: \"#ffc7ee\",\n      color: \"#ffc7ee\"\n    }\n  }\n};\nexport default function OrderScreen() {\n  var _this = this;\n\n  var _useContext = useContext(Store),\n      state = _useContext.state;\n\n  var cartItems = state.cart.cartItems,\n      userInfo = state.userInfo;\n\n  var _useState = useState(false),\n      success = _useState[0],\n      setSuccess = _useState[1];\n\n  var stripe = useStripe();\n  var elements = useElements();\n  var c = 2.8;\n  console.log(c);\n  var router = useRouter();\n  var orderId = router.query.id;\n  /* const {\r\n     cart: { shippingAddress },\r\n     \r\n   } = state;*/\n\n  var _useState2 = useState(false),\n      showItem = _useState2[0],\n      setShowItem = _useState2[1];\n\n  var _useState3 = useState({}),\n      order = _useState3[0],\n      setOrder = _useState3[1];\n\n  var _useState4 = useState(),\n      taxPrice = _useState4[0],\n      SettaxPrice = _useState4[1];\n\n  var _useState5 = useState(),\n      paymentMethod = _useState5[0],\n      SetpaymentMethod = _useState5[1];\n\n  var _useState6 = useState({}),\n      shippingAddress = _useState6[0],\n      SetshippingAddress = _useState6[1];\n\n  var _useState7 = useState([]),\n      orderItems = _useState7[0],\n      SetorderItems = _useState7[1];\n\n  var _useState8 = useState(),\n      totalPrice = _useState8[0],\n      SettotalPrice = _useState8[1];\n\n  var _useState9 = useState(),\n      itemsPrice = _useState9[0],\n      SetitemsPrice = _useState9[1];\n\n  var _useState10 = useState(),\n      shippingPrice = _useState10[0],\n      SetshippingPrice = _useState10[1];\n\n  var _useState11 = useState(),\n      isPaid = _useState11[0],\n      SetisPaid = _useState11[1];\n\n  var _useState12 = useState(),\n      isDelivered = _useState12[0],\n      SetisDelivered = _useState12[1];\n\n  var _useState13 = useState(),\n      deliveredAt = _useState13[0],\n      SetdeliveredAt = _useState13[1];\n\n  var _useState14 = useState(),\n      paidAt = _useState14[0],\n      SetpaidAt = _useState14[1];\n\n  var update = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Axios.put(\"http://localhost:5000/orders/\".concat(orderId, \"/pay\"), {});\n\n            case 2:\n              response = _context.sent;\n\n              if (response.data.success) {\n                console.log(\"paid\");\n                setSuccess(true);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function update() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var _yield$stripe$createP, error, paymentMethod, id, response;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return stripe.createPaymentMethod({\n                type: \"card\",\n                card: elements.getElement(CardElement)\n              });\n\n            case 3:\n              _yield$stripe$createP = _context2.sent;\n              error = _yield$stripe$createP.error;\n              paymentMethod = _yield$stripe$createP.paymentMethod;\n              console.log(totalPrice);\n              id = paymentMethod.id;\n              console.log(id);\n              _context2.next = 11;\n              return Axios.post(\"http://localhost:5000/orders/payment\", {\n                amount: totalPrice * 1000,\n                id: id\n              });\n\n            case 11:\n              response = _context2.sent;\n              update();\n\n              if (response.data.success) {\n                console.log(\"Successful payment\");\n                setSuccess(true);\n              }\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var fetchOrder = function fetchOrder() {\n      try {\n        Axios.get(\"http://localhost:5000/orders/\".concat(orderId), {\n          headers: {\n            authorization: \"Bearer \".concat(userInfo.token)\n          }\n        }).then(function (res) {\n          SettaxPrice(res.data.taxPrice);\n          SetpaymentMethod(res.data.paymentMethod);\n          SetshippingAddress(res.data.shippingAddress);\n          SetorderItems(res.data.orderItems);\n          console.log(res.data.orderItems);\n          SettotalPrice(res.data.totalPrice);\n          SetshippingPrice(res.data.shippingPrice);\n          SetitemsPrice(res.data.itemsPrice);\n          SetisPaid(res.data.isPaid);\n          SetisDelivered(res.data.isDelivered);\n          SetdeliveredAt(res.data.deliveredAt);\n          SetpaidAt(res.data.paidAt);\n        });\n      } catch (err) {}\n    };\n\n    if (!userInfo) {\n      return alert(\"Go To Sign In\");\n    }\n\n    if (!order._id || successPay || successDeliver || order._id && order._id !== orderId) {\n      fetchOrder();\n    }\n  }, [userInfo, orderId]);\n  return __jsx(CommonLayout, {\n    title: \"Order \".concat(orderId),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, __jsx(CheckoutSteps, {\n    activeStep: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    md: 9,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 12\n    }\n  }, __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    component: \"h3\",\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, \"Shipping Address\")), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, shippingAddress.fullName, \", \", shippingAddress.address, \",\", ' ', shippingAddress.city, \", \", shippingAddress.postalCode, \",\", ' ', shippingAddress.country), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Status:\", ' ', isDelivered ? \"delivered at \".concat(deliveredAt) : 'not delivered'))), __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    component: \"h3\",\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }, \"Payment Method\")), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, paymentMethod), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"Status: \", isPaid ? \"paid at \".concat(paidAt) : 'not paid'))), __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    component: \"h2\",\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }, \"Order Items\")), __jsx(Card, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, __jsx(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, __jsx(CardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 15\n    }\n  }, \"Items\"), __jsx(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, orderItems.map(function (item) {\n    return __jsx(ListItem, {\n      key: item._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 19\n      }\n    }, __jsx(Row, {\n      className: \"align-items-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, __jsx(Col, {\n      md: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 23\n      }\n    }, __jsx(\"img\", {\n      src: item.image,\n      alt: item.name,\n      className: \"img-fluid rounded img-thumbnail\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 25\n      }\n    }), ' '), __jsx(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 23\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 25\n      }\n    }, item.quantity)), __jsx(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }, \"$\", item.price)));\n  }))))))), __jsx(Grid, {\n    item: true,\n    md: 3,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 19\n    }\n  }, \"Order Summary\")), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 23\n    }\n  }, \"Items Price:\")), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 23\n    }\n  }, \"$\", itemsPrice)))), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 23\n    }\n  }, \"Tax:\")), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 23\n    }\n  }, \"$\", taxPrice)))), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 23\n    }\n  }, \"Shipping:\")), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 23\n    }\n  }, \"$\", shippingPrice)))), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 19\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 23\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 25\n    }\n  }, \"Total:\"))), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  }, __jsx(Typography, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 23\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 25\n    }\n  }, \"$\", totalPrice))))), showItem ? __jsx(React.Fragment, null, !success ? __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }\n  }, __jsx(\"fieldset\", {\n    className: \"FormGroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"FormRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  }, __jsx(CardElement, {\n    options: CARD_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 21\n    }\n  }))), __jsx(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, \"Pay\")) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 8\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 12\n    }\n  }, \"You just bought a sweet spatula congrats this is the best decision of you're life\"))) : __jsx(React.Fragment, null, __jsx(\"button\", {\n    onClick: function onClick() {\n      return setShowItem(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 6\n    }\n  }, \"Go To pay \"))))))));\n}","map":{"version":3,"sources":["C:/Users/Karim/Documents/GitHub/PrimeTime/client/pages/order/[id].js"],"names":["Grid","ImageList","List","ListItem","TableBody","TableCell","TableContainer","TableHead","TableRow","Typography","Axios","useRouter","React","useContext","useEffect","useReducer","useState","Card","CardBody","CardText","CardTitle","Col","ListGroup","Row","Table","CheckoutSteps","MessageBox","CommonLayout","PayPalButtons","usePayPalScriptReducer","StripeContainer","Store","NextLink","Link","CardElement","useElements","useStripe","CARD_OPTIONS","iconStyle","style","base","iconColor","color","fontWeight","fontFamily","fontSize","fontSmoothing","invalid","OrderScreen","state","cartItems","cart","userInfo","success","setSuccess","stripe","elements","c","console","log","router","orderId","query","id","showItem","setShowItem","order","setOrder","taxPrice","SettaxPrice","paymentMethod","SetpaymentMethod","shippingAddress","SetshippingAddress","orderItems","SetorderItems","totalPrice","SettotalPrice","itemsPrice","SetitemsPrice","shippingPrice","SetshippingPrice","isPaid","SetisPaid","isDelivered","SetisDelivered","deliveredAt","SetdeliveredAt","paidAt","SetpaidAt","update","put","response","data","handleSubmit","e","preventDefault","createPaymentMethod","type","card","getElement","error","post","amount","fetchOrder","get","headers","authorization","token","then","res","err","alert","_id","successPay","successDeliver","fullName","address","city","postalCode","country","map","item","image","name","quantity","price"],"mappings":"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","sourcesContent":["import { Grid, ImageList, List, ListItem, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography } from '@material-ui/core';\r\nimport Axios from 'axios';\r\nimport { useRouter } from 'next/router';\r\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\r\nimport { Card, CardBody, CardText, CardTitle, Col, ListGroup, Row, Table } from 'reactstrap';\r\nimport CheckoutSteps from '../../components/CheckoutSteps';\r\nimport MessageBox from '../../components/MessageBox';\r\nimport CommonLayout from '../../containers/common/common-layout';\r\nimport { PayPalButtons, usePayPalScriptReducer } from '@paypal/react-paypal-js'\r\nimport StripeContainer from '../../components/StripeContainer';\r\n\r\nimport { Store } from '../../utils/Store';\r\nimport NextLink from 'next/link';\r\nimport { Link } from 'react-router-dom';\r\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\r\n\r\nconst CARD_OPTIONS = {\r\n\ticonStyle: \"solid\",\r\n\tstyle: {\r\n\t\tbase: {\r\n\t\t\ticonColor: \"#c4f0ff\",\r\n\t\t\tcolor: \"#000\",\r\n\t\t\tfontWeight: 500,\r\n\t\t\tfontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\r\n\t\t\tfontSize: \"16px\",\r\n\t\t\tfontSmoothing: \"antialiased\",\r\n\t\t\t\":-webkit-autofill\": { color: \"#fce883\" },\r\n\t\t\t\"::placeholder\": { color: \"#87bbfd\" }\r\n\t\t},\r\n\t\tinvalid: {\r\n\t\t\ticonColor: \"#ffc7ee\",\r\n\t\t\tcolor: \"#ffc7ee\"\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default function OrderScreen() {\r\n  const { state } = useContext(Store);\r\n  const {cart: {cartItems}, userInfo } = state;\r\n  const [success, setSuccess ] = useState(false)\r\n  const stripe = useStripe()\r\n  const elements = useElements()\r\n  var c=2.8;\r\n  console.log(c);\r\n\r\n  const router = useRouter();\r\n    const { id: orderId } = router.query\r\n\r\n    \r\n   /* const {\r\n      cart: { shippingAddress },\r\n      \r\n    } = state;*/\r\n    const [showItem, setShowItem] = useState(false);\r\n    const [ order,setOrder] = useState({});\r\n    \r\n    const [taxPrice,SettaxPrice]=useState();\r\n    const [paymentMethod,SetpaymentMethod]=useState();\r\n    const [shippingAddress,SetshippingAddress]= useState({});\r\n    const [orderItems,SetorderItems]=useState([]);\r\n    const [totalPrice,SettotalPrice]=useState();\r\n    const [itemsPrice,SetitemsPrice]=useState();\r\n    const [shippingPrice,SetshippingPrice]=useState();\r\n    const [isPaid,SetisPaid]=useState();\r\n    const [isDelivered,SetisDelivered]=useState();\r\n    const [deliveredAt,SetdeliveredAt]=useState();\r\n    const [paidAt,SetpaidAt]=useState();\r\n\r\n\r\n\r\n\r\n\r\n    const update = async () => {\r\n      const response = await Axios.put(`http://localhost:5000/orders/${orderId}/pay`, {\r\n         \r\n      }) \r\n      \r\n      if(response.data.success) {\r\n          console.log(\"paid\")\r\n          setSuccess(true)\r\n      }\r\n\r\n  }\r\n  const handleSubmit = async (e) => {\r\n      e.preventDefault()\r\n      const {error, paymentMethod} = await stripe.createPaymentMethod({\r\n          type: \"card\",\r\n          card: elements.getElement(CardElement)\r\n      })\r\n\r\n\r\n   \r\n       console.log(totalPrice);\r\n          const {id} = paymentMethod\r\n          console.log(id)\r\n          const response = await Axios.post(\"http://localhost:5000/orders/payment\", {\r\n              amount: totalPrice*1000,\r\n              id\r\n          })\r\n          update();\r\n\r\n          if(response.data.success) {\r\n              console.log(\"Successful payment\")\r\n              setSuccess(true)\r\n          }\r\n\r\n      \r\n  \r\n}\r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    \r\n    const fetchOrder =  () => {\r\n      try {\r\n       \r\n          Axios.get(`http://localhost:5000/orders/${orderId}`, {\r\n          headers: { authorization: `Bearer ${userInfo.token}` },\r\n        }).then( res => {\r\n        \r\n          SettaxPrice(res.data.taxPrice);\r\n          SetpaymentMethod(res.data.paymentMethod);\r\n          SetshippingAddress(res.data.shippingAddress);\r\n          SetorderItems(res.data.orderItems);\r\n          console.log(res.data.orderItems);\r\n          SettotalPrice(res.data.totalPrice);\r\n          SetshippingPrice(res.data.shippingPrice)\r\n          SetitemsPrice(res.data.itemsPrice)\r\n          SetisPaid(res.data.isPaid);\r\n          SetisDelivered(res.data.isDelivered)\r\n          SetdeliveredAt(res.data.deliveredAt)\r\n          SetpaidAt(res.data.paidAt);\r\n         });\r\n        \r\n      } catch (err) {\r\n        \r\n      }\r\n    };\r\n\r\n    if (!userInfo) {\r\n      return alert(\"Go To Sign In\")\r\n    }\r\n    if (!order._id ||\r\n      successPay ||\r\n      successDeliver ||\r\n      (order._id && order._id !== orderId)) {\r\n      fetchOrder();\r\n    }\r\n  }, [userInfo, orderId]);\r\n\r\n  \r\n  return (\r\n    <CommonLayout title={`Order ${orderId}`}>\r\n      <CheckoutSteps activeStep={3}></CheckoutSteps>\r\n      \r\n      <div>\r\n      <Grid container spacing={1}>\r\n          <Grid item md={9} xs={12}>\r\n           <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h3\" variant=\"h3\">\r\n                    Shipping Address\r\n                  </Typography>\r\n                </ListItem>\r\n                <ListItem>\r\n                  {shippingAddress.fullName}, {shippingAddress.address},{' '}\r\n                  {shippingAddress.city}, {shippingAddress.postalCode},{' '}\r\n                  {shippingAddress.country}\r\n                </ListItem>\r\n                <ListItem>\r\n                  Status:{' '}\r\n                  {isDelivered\r\n                    ? `delivered at ${deliveredAt}`\r\n                    : 'not delivered'}\r\n                </ListItem>\r\n              </List>\r\n            </Card>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h3\" variant=\"h3\">\r\n                    Payment Method\r\n                  </Typography>\r\n                </ListItem>\r\n                <ListItem>{paymentMethod}</ListItem>\r\n                <ListItem>\r\n                  Status: {isPaid ? `paid at ${paidAt}` : 'not paid'}\r\n                </ListItem>\r\n              </List>\r\n            </Card>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography component=\"h2\" variant=\"h2\">\r\n                    Order Items\r\n                  </Typography>\r\n                </ListItem>\r\n                <Card className=\"mb-3\">\r\n            <CardBody>\r\n              <CardTitle>Items</CardTitle>\r\n              <ListGroup variant=\"flush\">\r\n                {orderItems.map((item) => (\r\n                  <ListItem key={item._id}>\r\n                    <Row className=\"align-items-center\">\r\n                      <Col md={6}>\r\n                        <img\r\n                          src={item.image}\r\n                          alt={item.name}\r\n                          className=\"img-fluid rounded img-thumbnail\"\r\n                        ></img>{' '}\r\n                         \r\n                      </Col>\r\n                      <Col md={3}>\r\n                        <span>{item.quantity}</span>\r\n                      </Col>\r\n                      <Col md={3}>${item.price}</Col>\r\n                    </Row>\r\n                  </ListItem>\r\n                ))}\r\n              </ListGroup>\r\n               \r\n            </CardBody>\r\n          </Card>\r\n              </List>\r\n            </Card>\r\n             \r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography variant=\"h3\">Order Summary</Typography>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Items Price:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${itemsPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Tax:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${taxPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>Shipping:</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">${shippingPrice}</Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Grid container>\r\n                    <Grid item xs={6}>\r\n                      <Typography>\r\n                        <strong>Total:</strong>\r\n                      </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Typography align=\"right\">\r\n                        <strong>${totalPrice}</strong>\r\n                      </Typography>\r\n                    </Grid>\r\n                  </Grid>\r\n                </ListItem>\r\n                {showItem ? (\r\n\t\t\t\t<>\r\n        {!success ? \r\n        <form onSubmit={handleSubmit}>\r\n            <fieldset className=\"FormGroup\">\r\n                <div className=\"FormRow\">\r\n                    <CardElement options={CARD_OPTIONS}/>\r\n                </div>\r\n            </fieldset>\r\n            <button>Pay</button>\r\n        </form>\r\n        :\r\n       <div>\r\n           <h2>You just bought a sweet spatula congrats this is the best decision of you're life</h2>\r\n       </div> \r\n        }\r\n            \r\n        </>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button onClick={() => setShowItem(true)}>Go To pay </button>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n              </List>\r\n            </Card>\r\n          </Grid>\r\n            </Grid>\r\n            </div>\r\n    \r\n  </CommonLayout>\r\n    \r\n  \r\n     \r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}
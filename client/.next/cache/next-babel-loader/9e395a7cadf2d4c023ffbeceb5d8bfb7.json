{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"C:\\\\Users\\\\Karim\\\\Documents\\\\GitHub\\\\PrimeTime\\\\client\\\\utils\\\\Store.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { createContext, useReducer } from 'react';\nimport Cookies from 'js-cookie';\nexport const Store = createContext();\nconst initialState = {\n  darkMode: Cookies.get('darkMode') === 'ON' ? true : false,\n  cart: {\n    cartItems: Cookies.get('cartItems') ? JSON.parse(Cookies.get('cartItems')) : [],\n    shippingAddress: Cookies.get('shippingAddress') ? JSON.parse(Cookies.get('shippingAddress')) : {\n      location: {}\n    },\n    paymentMethod: Cookies.get('paymentMethod') ? Cookies.get('paymentMethod') : ''\n  },\n  userInfo: Cookies.get('userInfo') ? JSON.parse(Cookies.get('userInfo')) : null\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'CART_ADD_ITEM':\n      {\n        const newItem = action.payload;\n        const existItem = state.cart.cartItems.find(item => item._id === newItem._id);\n        const cartItems = existItem ? state.cart.cartItems.map(item => item.name === existItem.name ? newItem : item) : [...state.cart.cartItems, newItem];\n        Cookies.set('cartItems', _JSON$stringify(cartItems));\n        return _objectSpread({}, state, {\n          cart: _objectSpread({}, state.cart, {\n            cartItems\n          })\n        });\n      }\n\n    case 'CART_REMOVE_ITEM':\n      {\n        const cartItems = state.cart.cartItems.filter(item => item._id !== action.payload._id);\n        Cookies.set('cartItems', _JSON$stringify(cartItems));\n        return _objectSpread({}, state, {\n          cart: _objectSpread({}, state.cart, {\n            cartItems\n          })\n        });\n      }\n\n    case 'USER_SIGNIN':\n      return _objectSpread({}, state, {\n        userInfo: action.payload\n      });\n\n    case 'USER_SIGNOUT':\n      return _objectSpread({}, state, {\n        userInfo: null,\n        cart: {\n          cartItems: [],\n          shippingAddress: {},\n          paymentMethod: ''\n        }\n      });\n\n    case 'SAVE_SHIPPING_ADDRESS':\n      return _objectSpread({}, state, {\n        cart: _objectSpread({}, state.cart, {\n          shippingAddress: action.payload\n        })\n      });\n\n    case 'SAVE_PAYMENT_METHOD':\n      return _objectSpread({}, state, {\n        cart: _objectSpread({}, state.cart, {\n          paymentMethod: action.payload\n        })\n      });\n\n    case 'CART_CLEAR':\n      return _objectSpread({}, state, {\n        cart: _objectSpread({}, state.cart, {\n          cartItems: []\n        })\n      });\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, initialState);\n  const value = {\n    state,\n    dispatch\n  };\n  return __jsx(Store.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 10\n    }\n  }, props.children, \" \");\n}","map":{"version":3,"sources":["C:/Users/Karim/Documents/GitHub/PrimeTime/client/utils/Store.js"],"names":["React","createContext","useReducer","Cookies","Store","initialState","darkMode","get","cart","cartItems","JSON","parse","shippingAddress","location","paymentMethod","userInfo","reducer","state","action","type","newItem","payload","existItem","find","item","_id","map","name","set","filter","StoreProvider","props","dispatch","value","children"],"mappings":"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","sourcesContent":["import React,{ createContext, useReducer } from 'react';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport const Store = createContext();\r\n\r\nconst initialState = {\r\n    darkMode: Cookies.get('darkMode') === 'ON' ? true : false,\r\n  cart: {\r\n    cartItems: Cookies.get('cartItems')\r\n      ? JSON.parse(Cookies.get('cartItems'))\r\n      : [],\r\n    shippingAddress: Cookies.get('shippingAddress')\r\n      ? JSON.parse(Cookies.get('shippingAddress'))\r\n      : { location: {} },\r\n    paymentMethod: Cookies.get('paymentMethod')\r\n      ? Cookies.get('paymentMethod')\r\n      : '',\r\n  },\r\n  userInfo: Cookies.get('userInfo')\r\n    ? JSON.parse(Cookies.get('userInfo'))\r\n    : null,\r\n};\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'CART_ADD_ITEM': {\r\n        const newItem = action.payload;\r\n        const existItem = state.cart.cartItems.find(\r\n          (item) => item._id === newItem._id\r\n        );\r\n        const cartItems = existItem\r\n          ? state.cart.cartItems.map((item) =>\r\n              item.name === existItem.name ? newItem : item\r\n            )\r\n          : [...state.cart.cartItems, newItem];\r\n        Cookies.set('cartItems', JSON.stringify(cartItems));\r\n        return { ...state, cart: { ...state.cart, cartItems } };\r\n      }\r\n      case 'CART_REMOVE_ITEM': {\r\n        const cartItems = state.cart.cartItems.filter(\r\n          (item) => item._id !== action.payload._id\r\n        );\r\n        Cookies.set('cartItems', JSON.stringify(cartItems));\r\n        return { ...state, cart: { ...state.cart, cartItems } };\r\n      }\r\n      case 'USER_SIGNIN':\r\n      return { ...state, userInfo: action.payload };\r\n      case 'USER_SIGNOUT':\r\n      return {\r\n        ...state,\r\n        userInfo: null,\r\n        cart: {\r\n          cartItems: [],\r\n          shippingAddress: {},\r\n          paymentMethod: '',\r\n        },\r\n      };\r\n    case 'SAVE_SHIPPING_ADDRESS':\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          ...state.cart,\r\n          shippingAddress: action.payload,\r\n        },\r\n      };\r\n      case 'SAVE_PAYMENT_METHOD':\r\n      return {\r\n        ...state,\r\n        cart: { ...state.cart, paymentMethod: action.payload },\r\n      };\r\n      case 'CART_CLEAR':\r\n      return { ...state, cart: { ...state.cart, cartItems: [] } };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function StoreProvider(props) {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const value = { state, dispatch };\r\n  return <Store.Provider value={value}>{props.children} </Store.Provider>;\r\n}"]},"metadata":{},"sourceType":"module"}
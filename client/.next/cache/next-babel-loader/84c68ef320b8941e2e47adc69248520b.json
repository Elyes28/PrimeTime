{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Karim\\\\Desktop\\\\Project\\\\PrimeTime\\\\client\\\\pages\\\\cart.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useContext } from 'react';\nimport { Store } from '../utils/Store';\nimport { Container, Row, Col, ListGroup } from 'reactstrap';\nimport dynamic from 'next/dynamic';\nimport CommonLayout from '../containers/common/common-layout';\nimport axios from 'axios';\nimport NextLink from 'next/link';\nimport { Grid, TableContainer, Table, Typography, TableHead, TableBody, TableRow, TableCell, Link, Select, MenuItem, Button, Card, List, ListItem } from '@material-ui/core';\nimport { useRouter } from 'next/router';\n\nfunction CartScreen() {\n  var _this = this;\n\n  var navigate = useRouter();\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var userInfo = state.userInfo,\n      cartItems = state.cart.cartItems;\n\n  var updateCartHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item, quantity) {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"http://localhost:5000/products/\".concat(item._id));\n\n            case 2:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              if (!(data.stockQuantity < quantity)) {\n                _context.next = 7;\n                break;\n              }\n\n              window.alert('Sorry. Product is out of stock');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              dispatch({\n                type: 'CART_ADD_ITEM',\n                payload: _objectSpread({}, item, {\n                  quantity: quantity\n                })\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateCartHandler(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var removeItemHandler = function removeItemHandler(item) {\n    dispatch({\n      type: 'CART_REMOVE_ITEM',\n      payload: item\n    });\n  };\n\n  var checkoutHandler = function checkoutHandler() {\n    if (localStorage.getItem(\"user\")) {\n      navigate.push('/ShippingAddress');\n    } else {\n      alert(\"Go to Login\");\n    }\n  };\n\n  return __jsx(CommonLayout, {\n    title: \"Shopping Cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, __jsx(Typography, {\n    component: \"h1\",\n    variant: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, \"Shopping Cart\"), cartItems.length === 0 ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, \"Cart is empty.\", ' ', __jsx(NextLink, {\n    href: \"/blog/blog-masonary/masonary-left-sidebar\",\n    passHref: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"Go shopping\"))) : __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, __jsx(Grid, {\n    item: true,\n    md: 9,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, __jsx(NextLink, {\n    href: \"/blog/blog-masonary/masonary-left-sidebar\",\n    passHref: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \" Go shopping \"))), __jsx(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, __jsx(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, __jsx(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, __jsx(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 19\n    }\n  }, __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"Image\"), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Product Name\"), __jsx(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Quantity\"), __jsx(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"Price\"), __jsx(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Action\"))), __jsx(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, cartItems.map(function (item) {\n    return __jsx(TableRow, {\n      key: item._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, __jsx(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 23\n      }\n    }, __jsx(NextLink, {\n      href: \"/product/\".concat(item.slug),\n      passHref: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, __jsx(Link, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 27\n      }\n    }, item.image))), __jsx(TableCell, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }\n    }, __jsx(NextLink, {\n      href: \"/product/\".concat(item.slug),\n      passHref: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, __jsx(Link, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 27\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, item.productName)))), __jsx(TableCell, {\n      align: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 23\n      }\n    }, __jsx(Select, {\n      value: item.quantity,\n      onChange: function onChange(e) {\n        return updateCartHandler(item, e.target.value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 23\n      }\n    }, _toConsumableArray(Array(item.stockQuantity).keys()).map(function (x) {\n      return __jsx(MenuItem, {\n        key: x + 1,\n        value: x + 1,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }\n      }, x + 1);\n    }))), __jsx(TableCell, {\n      align: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 23\n      }\n    }, \"$\", item.price), __jsx(TableCell, {\n      align: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    }, __jsx(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: function onClick() {\n        return removeItemHandler(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 23\n      }\n    }, \"x\")));\n  }))))), __jsx(Grid, {\n    item: true,\n    md: 3,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, \"Subtotal (\", cartItems.reduce(function (a, c) {\n    return a + c.quantity;\n  }, 0), ' ', \"items) : $\", cartItems.reduce(function (a, c) {\n    return a + c.quantity * c.price;\n  }, 0))), __jsx(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    fullWidth: true,\n    type: \"button\",\n    onClick: checkoutHandler,\n    disabled: cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Check Out\")))))));\n}\n\nexport default dynamic(function () {\n  return _Promise.resolve(CartScreen);\n}, {\n  ssr: false\n});","map":{"version":3,"sources":["C:/Users/Karim/Desktop/Project/PrimeTime/client/pages/cart.js"],"names":["React","useContext","Store","Container","Row","Col","ListGroup","dynamic","CommonLayout","axios","NextLink","Grid","TableContainer","Table","Typography","TableHead","TableBody","TableRow","TableCell","Link","Select","MenuItem","Button","Card","List","ListItem","useRouter","CartScreen","navigate","state","dispatch","userInfo","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","stockQuantity","window","alert","type","payload","removeItemHandler","checkoutHandler","localStorage","getItem","push","length","map","slug","image","productName","e","target","value","Array","keys","x","price","reduce","a","c","resolve","ssr"],"mappings":"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","sourcesContent":["\r\nimport React, { useContext } from 'react';\r\n\r\nimport { Store } from '../utils/Store';\r\n\r\n \r\nimport {Container,Row,Col, ListGroup} from 'reactstrap'\r\nimport dynamic from 'next/dynamic';\r\n \r\n \r\nimport CommonLayout from '../containers/common/common-layout';\r\n\r\nimport axios from 'axios';\r\n\r\n \r\n \r\n \r\nimport NextLink from 'next/link';\r\n \r\nimport {\r\n  Grid,\r\n  TableContainer,\r\n  Table,\r\n  Typography,\r\n  TableHead,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  Link,\r\n  Select,\r\n  MenuItem,\r\n  Button,\r\n  Card,\r\n  List,\r\n  ListItem,\r\n} from '@material-ui/core';\r\nimport { useRouter } from 'next/router';\r\n\r\n function CartScreen() {\r\n  const navigate = useRouter();\r\n  const {state,dispatch} = useContext(Store);\r\n  const { userInfo,\r\n    cart: { cartItems },\r\n  } = state;\r\n\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(`http://localhost:5000/products/${item._id}`);\r\n    if (data.stockQuantity < quantity) {\r\n      window.alert('Sorry. Product is out of stock');\r\n      return;\r\n    }\r\n    dispatch({ type: 'CART_ADD_ITEM', payload: { ...item, quantity } });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    dispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n  };\r\n  const checkoutHandler = () => {\r\n    if (localStorage.getItem(\"user\")) {\r\n      navigate.push('/ShippingAddress');\r\n    } else{\r\n      alert(\"Go to Login\") ;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <CommonLayout title=\"Shopping Cart\">\r\n      <Typography component=\"h1\" variant=\"h1\">\r\n        Shopping Cart\r\n      </Typography>\r\n      {cartItems.length === 0 ? (\r\n        <div>\r\n           Cart is empty.{' '}\r\n          <NextLink href=\"/blog/blog-masonary/masonary-left-sidebar\" passHref>\r\n            <Link>Go shopping</Link>\r\n          </NextLink>\r\n        </div>\r\n      ) : (\r\n        <Grid container spacing={1}>\r\n          <Grid item md={9} xs={12}>\r\n          <NextLink href=\"/blog/blog-masonary/masonary-left-sidebar\" passHref>\r\n          <Link>\r\n            <Typography> Go shopping </Typography>\r\n          </Link>\r\n        </NextLink>\r\n            <TableContainer>\r\n              <Table>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Image</TableCell>\r\n                    <TableCell>Product Name</TableCell>\r\n                    <TableCell align=\"right\">Quantity</TableCell>\r\n                    <TableCell align=\"right\">Price</TableCell>\r\n                    <TableCell align=\"right\">Action</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {cartItems.map((item) => (\r\n                    <TableRow key={item._id}>\r\n                      <TableCell>\r\n                        <NextLink href={`/product/${item.slug}`} passHref>\r\n                          <Link>\r\n                          \r\n                            {item.image}\r\n                            \r\n                           \r\n                             \r\n                          </Link>\r\n                        </NextLink>\r\n                      </TableCell>\r\n\r\n                      <TableCell>\r\n                        <NextLink href={`/product/${item.slug}`} passHref>\r\n                          <Link>\r\n                            <div>{item.productName}</div>\r\n                          </Link>\r\n                        </NextLink>\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">\r\n                      <Select\r\n                          value={item.quantity}\r\n                          onChange={(e) =>\r\n                            updateCartHandler(item, e.target.value)\r\n                          }\r\n                        >\r\n                          {[...Array(item.stockQuantity).keys()].map((x) => (\r\n                            <MenuItem key={x + 1} value={x + 1}>\r\n                              {x + 1}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </TableCell>\r\n                      <TableCell align=\"right\">${item.price}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                      <Button\r\n                          variant=\"contained\"\r\n                          color=\"secondary\"\r\n                          onClick={() => removeItemHandler(item)}\r\n                        >\r\n                              x\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Grid>\r\n          <Grid item md={3} xs={12}>\r\n            <Card>\r\n              <List>\r\n                <ListItem>\r\n                  <Typography variant=\"h6\">\r\n                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                    items) : $\r\n                    {cartItems.reduce((a, c) => a + c.quantity * c.price, 0)}\r\n                  </Typography>\r\n                </ListItem>\r\n                <ListItem>\r\n                  <Button variant=\"contained\" color=\"primary\" fullWidth\r\n                  type=\"button\"\r\n                  onClick={checkoutHandler}\r\n                  disabled={cartItems.length === 0}>\r\n                    Check Out\r\n                  </Button>\r\n                </ListItem>\r\n              </List>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      )}\r\n    </CommonLayout>\r\n  );\r\n}\r\n export default dynamic(() => Promise.resolve(CartScreen), { ssr: false });"]},"metadata":{},"sourceType":"module"}